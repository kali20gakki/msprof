project(fe_ut)

if (BUILD_OPEN_PROJECT)
    SET(FE_ROOT_PATH ${AIR_CODE_DIR}/compiler/graphcompiler/engines/nneng)
    SET(FWK_TEST_PATH ${AIR_CODE_DIR}/tests)
    SET(THIRD_PARTY_DIR ${AIR_CODE_DIR}/third_party)
    SET(AIR_DIR ${AIR_CODE_DIR})
    SET(PLATFORM_FILE)
    SET(COMPRESS_FILE)
else()
    SET(FE_ROOT_PATH ${TOP_DIR}/air/compiler/graphcompiler/engines/nneng)
    SET(METADEF_DIR ${TOP_DIR}/metadef)
    SET(FWK_TEST_PATH ${TOP_DIR}/air/tests)
    SET(THIRD_PARTY_DIR ${TOP_DIR}/air/third_party)
    SET(AIR_DIR ${TOP_DIR}/air)
    SET(PLATFORM_FILE
     ${TOP_DIR}/abl/platform/platform_info.cpp
     ${TOP_DIR}/abl/platform/platform_infos_def.cpp
     ${TOP_DIR}/abl/platform/platform_infos_impl.cpp)
    SET(COMPRESS_FILE
     ${TOP_DIR}/abl/platform/compress/compress_weight.cpp)
endif()

file(GLOB_RECURSE PROTO_LIST RELATIVE ${CMAKE_CURRENT_LIST_DIR}
        "${METADEF_DIR}/proto/task.proto"
        "${METADEF_DIR}/proto/ge_ir.proto"
        "${METADEF_DIR}/proto/om.proto"
        "${METADEF_DIR}/proto/insert_op.proto"
        )

protobuf_generate(fe_ut PROTO_SRCS PROTO_HDRS ${PROTO_LIST})

# compile for fe_ut
add_executable(fe_ut
        ${PROTO_HDRS}
        ${PLATFORM_FILE}
        ${COMPRESS_FILE}
        ${CMAKE_CURRENT_LIST_DIR}/testcase/main.cc
        ${FE_ROOT_PATH}/optimizer/adapter/common/get_attr_by_type.cc
        ${FE_ROOT_PATH}/optimizer/adapter/common/op_store_adapter_manager.cc
        ${FE_ROOT_PATH}/optimizer/adapter/tbe_adapter/tbe_op_store_adapter.cc
        ${FE_ROOT_PATH}/optimizer/adapter/dsa_adapter/dsa_op_store_adapter.cc
        ${FE_ROOT_PATH}/optimizer/adapter/tbe_adapter/tbe_info/tbe_info_assembler.cc
        ${FE_ROOT_PATH}/optimizer/adapter/tbe_adapter/tbe_info/tbe_single_op_info_assembler.cc
        ${FE_ROOT_PATH}/optimizer/common/format/axis_name_util.cc
        ${FE_ROOT_PATH}/optimizer/common/format/axis_util.cc
        ${FE_ROOT_PATH}/optimizer/common/format/range_axis_util.cc
        ${FE_ROOT_PATH}/optimizer/common/fusion_statistic/buffer_fusion_info_collecter.cc
        ${FE_ROOT_PATH}/optimizer/common/fusion_statistic/fusion_statistic_writer.cc
        ${FE_ROOT_PATH}/optimizer/common/graph/fe_graph_utils.cc
        ${FE_ROOT_PATH}/optimizer/common/util/json_util.cc
        ${FE_ROOT_PATH}/optimizer/common/dump_util.cc
        ${FE_ROOT_PATH}/optimizer/common/fe_utils.cc
        ${FE_ROOT_PATH}/optimizer/common/fusion_op_comm.cc
        ${FE_ROOT_PATH}/optimizer/common/math_util.cc
        ${FE_ROOT_PATH}/optimizer/common/op_info_common.cc
        ${FE_ROOT_PATH}/optimizer/common/pass_manager.cc
        ${FE_ROOT_PATH}/optimizer/common/plugin_manager.cc
        ${FE_ROOT_PATH}/optimizer/common/unknown_shape_util.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/format_dtype_op_builtin_selector.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/broadcast/format_process/broadcast_format_process.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/broadcast/format_process/broadcast_process_5hd.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/broadcast/format_process/broadcast_process_6d.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/broadcast/format_process/broadcast_process_6hd.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/broadcast/format_process/broadcast_process_fractal_z.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/broadcast/format_process/broadcast_process_fractal_z_3d.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/broadcast/format_process/broadcast_process_nz.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/process/format_process_registry.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/reduce/reduce_format_selector/reduce_format_process.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/reduce/reduce_format_selector/reduce_process_5hd.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/reduce/reduce_format_selector/reduce_process_6hd.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/reduce/reduce_format_selector/reduce_process_fractal_z.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/builtin/reduce/reduce_format_selector/reduce_process_nz.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/common/format_dtype_selector_base.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/manager/format_dtype_manager_base.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/manager/format_dtype_querier.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/manager/format_dtype_setter.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/op_customize/format_dtype_op_customize_selector.cc
        ${FE_ROOT_PATH}/optimizer/format_selector/op_kernel/format_dtype_op_kernel_selector.cc
        ${FE_ROOT_PATH}/optimizer/fusion_config_manager/fusion_config_parser.cc
        ${FE_ROOT_PATH}/optimizer/fusion_config_manager/fusion_priority_manager.cc
        ${FE_ROOT_PATH}/optimizer/fusion_manager/fusion_manager.cc
        ${FE_ROOT_PATH}/optimizer/fusion_rule_manager/fusion_rule_data/fusion_rule_pattern.cc
        ${FE_ROOT_PATH}/optimizer/fusion_rule_manager/fusion_rule_parser/attr_assignment_expression.cc
        ${FE_ROOT_PATH}/optimizer/fusion_rule_manager/fusion_rule_parser/fusion_rule_json_pattern.cc
        ${FE_ROOT_PATH}/optimizer/fusion_rule_manager/fusion_rule_parser/fusion_rule_node_constructor.cc
        ${FE_ROOT_PATH}/optimizer/fusion_rule_manager/fusion_rule_parser/fusion_rule_parser_utils.cc
        ${FE_ROOT_PATH}/optimizer/fusion_rule_manager/fusion_rule_parser/fusion_rule_pattern_constructor.cc
        ${FE_ROOT_PATH}/optimizer/fusion_rule_manager/fusion_rule_manager.cc
        ${FE_ROOT_PATH}/optimizer/fusion_rule_manager/fusion_cycle_detector.cc
        ${FE_ROOT_PATH}/optimizer/itf_handler/itf_handler.cc
        ${FE_ROOT_PATH}/optimizer/ops_kernel_store/fe_ops_kernel_info_store.cc
        ${FE_ROOT_PATH}/optimizer/ops_kernel_store/sub_ops_store.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ffts/tbe_json_parse_impl.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ffts/tbe_sgt_json_parse.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/fusion_common/fusion_pass_manager.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/fuzzy_compiler/fuzzy_generalize.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/fuzzy_compiler/input_node_generalize.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/fusion_common/graph_node_map_util.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/graph_fusion.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/graph_matcher.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/graph_replace.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/depthwise_insert_transdata_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/conv_weight_compress_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/refresh_int64_to_int32_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/psroipooling_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/stride_hoist_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/swap_merge_cast_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/concat_quant_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/fixpipe_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/fixpipe_pre_quant_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/fixpipe_common.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/fixpipe_addinputstrategy.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/node_optimize/conv_concat_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/node_optimize/node_optimize_pass_base.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/node_optimize/split_conv_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/node_optimize/split_conv_concat_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/node_optimize/checker/concat_optimize_checker.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/node_optimize/checker/node_optimize_checker_base.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/node_optimize/checker/split_optimize_checker.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/node_optimize/common/node_optimize_utils.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/node_optimize/common/node_optimize_utils.h
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/quant_host_cpu_op_common.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/tf_merge_conv2dbackpropinput_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/tf_merge_weight_quant_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/cast_relu_cast_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/tf_tag_no_const_folding_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/delete_no_const_folding_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/avgpool_quant_process_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/bias_optimize_quant_rollback_base.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/conv2d_quant_process_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/conv2dtd_quant_process_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/deconvolution_quant_process_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/dwconv2d_quant_process_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/fc_quant_process_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/group_conv2d_quant_process_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/matmulv2_quant_process_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/batch_matmulv2_quant_process_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/pooling_quant_process_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/bias_optimize_quant_rollback/maxpool_quant_process_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/requant_fusion_pass/v100_not_requant_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/requant_fusion_pass/v100_requant_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/requant_fusion_pass/v100_requant_util.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/requant_fusion_pass/v200_not_requant_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/requant_fusion_pass/v200_requant_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/graph_fusion/fusion_pass_manager/builtin_pass/quant_pass/requant_fusion_pass/v200_requant_util.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/heavy_format_propagation/heavy_format_propagation.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/heavy_format_propagation/heavy_format_selector.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/heavy_format_propagation/heavy_format_supportformats_updater.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/node_optimizer/concat_n_optimizer.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/node_optimizer/concat_c_to_n_optimizer.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/node_optimizer/split_c_to_n_optimizer.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/node_optimizer/split_n_optimizer.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_axis_update/op_axis_update_desc.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_compiler/op_compiler.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_compiler/op_compiler_baseline.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_compiler/op_compiler_mstune_before_ub_match.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_compiler/op_compiler_normal.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_compiler/op_compiler_optune.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_compiler/tbe_json_parse.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_allow_fp32_to_fp16.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_allow_fp32_to_bf16.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_allow_fp32_to_lowprecision.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_allow_mix_precision_fp16.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_allow_mix_precision_bf16.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_allow_mix_precision_base.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_base.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_default_mode.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_force_fp16.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_force_bf16.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_force_lowerprecision.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/dtype_strategy/op_dtype_selection_strategy_force_fp32.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/format_strategy/op_format_selection_strategy_default_mode.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/format_strategy/op_format_selection_strategy_follow_predecessor.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/matcher/dtype/op_dtype_matcher_base.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/matcher/dtype/op_dtype_mix_precision_matcher.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/matcher/dtype/op_dtype_precise_matcher.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/matcher/dtype/op_dtype_reduce_matcher.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/matcher/dtype/op_dtype_rise_matcher.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/matcher/format/op_format_matcher.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/strategy/op_format_dtype_strategy_manager.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/update_desc/subgraph/sub_data_format_dtype_update.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/update_desc/subgraph/sub_graph_format_dtype_update.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/update_desc/subgraph/sub_netoutput_format_dtype_update.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/update_desc/op_format_dtype_update_desc.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/update_desc/op_format_dtype_update_desc_base.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/format_and_dtype/op_format_dtype_judge.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/imply_type/op_impl_type_judge.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_judge/op_judge_base.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/op_setter/op_setter.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/range_format_transfer/transfer_range_according_to_format.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_implementation/trans_node_base_generator.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_implementation/trans_node_cast_generator.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_implementation/trans_node_reformat_generator.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_implementation/trans_node_reshape_generator.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_implementation/trans_node_transdata_generator.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_implementation/trans_node_transdatarnn_generator.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_implementation/trans_node_transpose_generator.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_implementation/trans_node_squeeze_v2_generator.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_implementation/trans_node_unsqueeze_v2_generator.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_manager/trans_node_insertion/trans_node_insertion.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_manager/trans_node_merging/trans_node_merging.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/trans_node_manager/trans_node_manager.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/shape_format_transfer/transfer_shape_according_to_format.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/spacesize_calculator/spacesize_calculator.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/spacesize_calculator/tensor_compute_util.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/stream_graph_optimizer/l2_optimizer/l2_fusion_allocation/l2_fusion_allocation.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/stream_graph_optimizer/l2_optimizer/l2_fusion_comm/l2_fusion_comm.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/stream_graph_optimizer/l2_optimizer/l2_fusion_handler/l2_fusion_handler.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/stream_graph_optimizer/l2_optimizer/l2_fusion_parser/l2_fusion_parser.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/stream_graph_optimizer/l2_optimizer/l2_fusion_rtl2ctrl/l2_fusion_rtl2ctrl.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/stream_graph_optimizer/l2_optimizer/l2_optimizer.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_bnupdate_eltwise_eltwise_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_bnupdate_eltwise_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_common_rules0_fusion_pass.cc

        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_common_rules2_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_eltwise_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_eltwise_quant_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_eltwise_write_select_fussion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_elemwise_quant_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_multi_output_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_read_select_eltwise_fussion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_reduce_elemwise_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_segment_elemwise_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/aipp_conv_slice_info.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/conv_dequant_slice_info.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/conv_dequants16_slice_info.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/conv_eltwise_slice_info.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/conv_pooling_slice_info.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/conv_requant_slice_info.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/conv_requants16_slice_info.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/conv_select_slice_info.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/conv_strided_slice_info.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/dequant_slice_info.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/ub_pass_slice_info_base.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_fixpipe_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/ub_pass_slice_info/ub_pass_slice_info_manager.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_dynamic_elemwise_reduce_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/tbe_pass/tbe_dynamic_elemwise_broadcast_fusion_pass.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/automatic_buffer_fusion.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/buffer_fusion.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/buffer_fusion_pass_runner.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/connectivity_matrix.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/fusion_graph_merge/fusion_graph_merge.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/fusion_graph_merge/ub_fusion_graph_merge.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/ub_fusion/fusion_graph_merge/l1_fusion_graph_merge.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/fe_graph_optimizer.cc
        ${FE_ROOT_PATH}/optimizer/graph_optimizer/dsa_optimizer/dsa_graph_optimizer.cc
        ${FE_ROOT_PATH}/opskernel/ops_store/op_kernel_info.cc
        ${FE_ROOT_PATH}/opskernel/ops_store/op_kernel_info_constructor.cc
        ${FE_ROOT_PATH}/opskernel/ops_store/ops_kernel_manager.cc
        ${FE_ROOT_PATH}/opskernel/ops_store/ops_kernel_utils.cc
        ${FE_ROOT_PATH}/opskernel/ops_store/sub_op_info_store.cc
        ${FE_ROOT_PATH}/utils/adapter/adapter_itf/task_builder_adapter.cc
        ${FE_ROOT_PATH}/utils/adapter/factory/task_builder_adapter_factory.cc
        ${FE_ROOT_PATH}/utils/adapter/tbe_adapter/kernel_launch/l2_cache_kernel_launch.cc
        ${FE_ROOT_PATH}/utils/adapter/tbe_adapter/kernel_launch/tbe_kernel_launch.cc
        ${FE_ROOT_PATH}/utils/adapter/tbe_adapter/tbe_task_builder_adapter.cc
        ${FE_ROOT_PATH}/utils/common/common_utils.cc
        ${FE_ROOT_PATH}/utils/common/configuration.cc
        ${FE_ROOT_PATH}/utils/common/fe_fp16_t.cc
        ${FE_ROOT_PATH}/utils/common/fe_type_utils.cc
        ${FE_ROOT_PATH}/utils/common/graph_comm.cc
        ${FE_ROOT_PATH}/utils/common/graph_comm_impl.cc
        ${FE_ROOT_PATH}/utils/common/large_bitmap.cc
        ${FE_ROOT_PATH}/utils/common/l2_stream_info.cc
        ${FE_ROOT_PATH}/utils/common/lxfusion_json_util.cc
        ${FE_ROOT_PATH}/utils/common/op_tensor_utils.cc
        ${FE_ROOT_PATH}/utils/common/scope_allocator.cc
        ${FE_ROOT_PATH}/utils/common/function_state.cc
        ${FE_ROOT_PATH}/utils/common/op_slice_util.cc
        ${FE_ROOT_PATH}/utils/ffts/ffts_task_builder_adapter.cc
        ${FE_ROOT_PATH}/utils/ops_kernel_builder/aicore_ops_kernel_builder.cc
        ${FE_ROOT_PATH}/utils/ops_kernel_builder/dsa_ops_kernel_builder.cc
        ${FE_ROOT_PATH}/utils/param_calculate/tensorsize_calculator.cc
        ${FE_ROOT_PATH}/utils/task_builder/task_builder.cc
        ${FE_ROOT_PATH}/utils/dsa/dsa_task_builder.cc
        ${FE_ROOT_PATH}/utils/cmo_task_builder/cmo_task_builder.cc
        ${FE_ROOT_PATH}/utils/cmo_task_builder/cmo_task/cmo_id_gen_strategy.cc
        ${FE_ROOT_PATH}/utils/cmo_task_builder/cmo_task/generate_cmo_task_base.cc
        ${FE_ROOT_PATH}/utils/cmo_task_builder/cmo_task/generate_cmo_barrier_task.cc
        ${FE_ROOT_PATH}/utils/cmo_task_builder/cmo_task/generate_cmo_invalid_task.cc
        ${FE_ROOT_PATH}/utils/cmo_task_builder/cmo_task/generate_cmo_prefetch_task.cc
        ${FE_ROOT_PATH}/utils/cmo_task_builder/cmo_task/generate_cmo_writeback_task.cc
        ${FE_ROOT_PATH}/executor/ffts_plus_update/ffts_plus_update.cc
        ${FE_ROOT_PATH}/optimizer/cmo/generate_cmo_type_manager.cc
        ${FE_ROOT_PATH}/optimizer/cmo/generate_cmo_type_base.cc
        ${FE_ROOT_PATH}/optimizer/cmo/generate_cmo_type_invalid.cc
        ${FE_ROOT_PATH}/optimizer/cmo/generate_cmo_type_prefetch.cc
        ${FE_ROOT_PATH}/optimizer/cmo/generate_cmo_type_writeback.cc
        ${CMAKE_CURRENT_LIST_DIR}/../graph_constructor/graph_builder_utils.cc
        ${CMAKE_CURRENT_LIST_DIR}/../graph_constructor/graph_constructor.cc
        ${CMAKE_CURRENT_LIST_DIR}/../stub/slog_stub.cc

        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/adapter/adapter_itf/op_store_adapter_manage_unitest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/adapter/adapter_itf/task_builder_adapter_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/adapter/tbe_adapter/tbe_task_builder_adapter_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/adapter/tbe_info/tbe_single_op_info_assemble_unitest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/adapter/tbe_info/tbe_info_assembler_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/cmo_task_builder/cmo_task_builder_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/common/dump_util_utest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/common/math_util_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/common/fe_fp16_utest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/common/op_info_common_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/common/fusion_op_comm_utest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/common/format/axis_name_util_utest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/common/format/range_axis_util_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/common/fusion_statistic/buffer_fusion_info_collector_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/common/ut_lxfusion_json_util.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/format_selector/format_dtype_selector_manager_broadcast_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/format_selector/format_dtype_selector_manager_customize_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/format_selector/format_dtype_selector_manager_kernel_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/format_selector/reduce/format_selector_reduce_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/format_selector/reduce/format_selector_reduce_nz_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/format_selector/format_dtype_selector_manager_fz_3d_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_manager/ut_configuration.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_manager/ut_fusion_graph_merge_util.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_manager/ut_fusion_manager.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_manager/ut_graph_comm.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_manager/ut_itf.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_manager/ut_op_info_common.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_manager/ut_pass_manager.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_manager/ut_tensor_compute_util.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_rule_manager/fusion_rule_manager_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_rule_manager/fusion_rule_manager_uttest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_rule_parser/fusion_rule_cycle_detection_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_rule_parser/fusion_rule_json_anchor_uttest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_rule_parser/fusion_rule_json_edge_uttest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_rule_parser/fusion_rule_json_outer_uttest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/fusion_config_manager/fusion_config_parser_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_fusion/graph_fusion_stride_hoist_pass_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/fusion_common/fusion_pass_manager_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/fusion_common/graph_node_map_util_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/fuzzy_compiler/fuzzy_generalize_utest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/node_optimize/checker/concat_optimize_checker_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/node_optimize/split_c_to_n_optimize_uinttest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/node_optimize/concat_c_to_n_optimize_uinttest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/node_optimize/conv_concat_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/node_optimize/split_conv_concat_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/quant_pass/avgpool_quant_process_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/quant_pass/batch_matmulv2_quant_process_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/quant_pass/group_conv2d_quant_process_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/quant_pass/maxpool_quant_process_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/quant_pass/pooling_quant_process_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_bnhost_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fixpipe_common_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fixpipe_pre_quant_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fixpipe_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fixpipe_addinputstrategy_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_cast_relu_cast_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_pass_refresh_int64_to_int32_st.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_engine_batchnorm_bninfer_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_engine_logsoftmaxgrad_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_engine_matmul_biasadd_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_engine_matmul_cast_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_engine_psroipooling_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_engine_requant_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_engine_tf_merge_conv2dbackpropinput_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_engine_tf_quant_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_pass_conv_weight_compress_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_quant_norequant_eltwise_pass_unitest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_quant_process_conv2dtd_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_quant_rollback_bias_optimize_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_swap_merge_cast_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_concat_quant_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/pass_fusion_manager/fusion_engine_depthwise_insert_transdata_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/fusion_engine_graph_replace_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/graph_fusion/graph_matcher_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/shape_format_transfer/trans_node_implementation/trans_node_reformat_generator_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_fusion/graph_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/fusion_engine_coverage.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/fusion_engine_fe_graph_optimizer_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/graph_optimizer/check_graph_cycle_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/heavy_format_propagation/ut_dsl_test.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/dsa_optimizer/fusion_engine_dsa_graph_optimizer_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/heavy_format_propagation/ut_heavy_format_propagation.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/heavy_format_propagation/ut_heavy_format_propagation_complex.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/heavy_format_propagation/ut_heavy_format_propagation_format_continous.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/heavy_format_propagation/ut_heavy_format_propagation_fzg.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/heavy_format_propagation/ut_heavy_format_propagation_graph_constructor.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/heavy_format_propagation/ut_heavy_format_propagation_ts_op.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/l2_optimizer/fusion_engine_l2_optimzer_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_calculator/ut_op_calculator.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_compiler/fusion_engine_op_compiler_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_compiler/fusion_engine_tbe_compiler_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_compiler/fusion_engine_tbe_json_parser_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_compiler/fusion_engine_sgt_tbe_compiler_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_judge/fusion_engine_op_judge_function_op_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_judge/fusion_engine_op_judge_unittest_conv3d_related.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_judge/fusion_engine_op_judge_unittest_fz_group.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_judge/fusion_engine_op_judge_unittest_fz_lstm.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_judge/fusion_engine_op_judge_unittest_rnn.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_judge/fusion_engine_op_judge_unittest_new.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_judge/fusion_engine_op_judge_unittest_precision_mode.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_judge/fusion_engine_op_judge_unknown_shape_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_judge/op_format_dtype_update_desc_base_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ops_kernel_builder/ops_kernel_builder_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ops_kernel_builder/dsa_ops_kernel_builder_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ops_kernel_store/check_attr_support_utest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ops_kernel_store/check_param_type_utest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ops_kernel_store/json_util_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ops_kernel_store/op_info_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ops_kernel_store/ops_kernel_info_store_singleop_compile_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ops_kernel_store/ops_kernel_info_store_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ops_kernel_store/ops_kernel_info_store_unittest_2.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/param_calculate/tensorsize_calculator_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/shape_format_transfer/fusion_engine_trans_op_insert_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/shape_format_transfer/expand_dims.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/shape_format_transfer/fusion_engine_trans_op_insert_unknown_shape_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/shape_format_transfer/trans_op_insert_complex_by_original_format_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/shape_format_transfer/trans_op_insert_complex_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/shape_format_transfer/trans_op_insert_complex_unittest_2.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/shape_format_transfer/trans_op_insert_fz_3d_with_reshape.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/shape_format_transfer/trans_op_insert_RNN.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/task_builder/task_builder_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/task_builder/ffts_plus_update_utest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/automatic_ub_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/fusion_stub.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/scopeallocator_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_bnupdate_elemwise_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_common_rules0_ub_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/buffer_fusion_cycle_detection_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_conv_dequant_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_conv_dequant_quant_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_conv_eltwise_relu_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_conv_stride_quant_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_conv_strided_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_eltwise_eltwise_ctrl_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_l1_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_ub_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/aipp_conv_slice_info_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/conv_dequant_slice_info_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/conv_dequants16_slice_info_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/conv_requants16_slice_info_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/conv2d_ub_slice_info_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_dynamic_elemwise_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_fixpipe_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/tbe_elemwise_quant_fusion_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/update_axis/op_axis_update_desc_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_setter/op_slice_info_setter_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/op_setter/op_setter_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ffts/ffts_task_builder_adapter_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ffts/tbe_sgt_json_parser_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/ub_slice_info_tbe_common_rules0_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/ub_slice_info_tbe_common_rules2_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/ub_slice_info_tbe_eltwise_quant_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/ub_slice_info_tbe_eltwise_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/ub_slice_info_tbe_multi_output_fusion_pass_unittest.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/ub_slice_info_tbe_read_select_eltwise_fussion_pass.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/ub_fusion/ub_slice_info_unittest/ub_slice_info_tbe_eltwise_write_select_fussion_pass.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/cmo/generate_cmo_type_base_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/cmo/generate_cmo_type_prefetch_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/cmo/generate_cmo_type_writeback_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/cmo/generate_cmo_type_invalid_ut.cc
        ${CMAKE_CURRENT_LIST_DIR}/testcase/fusion_engine/cmo/generate_cmo_type_manager_ut.cc)
set_target_properties(fe_ut PROPERTIES CXX_STANDARD 17)
if (BUILD_OPEN_PROJECT)
    target_include_directories(fe_ut PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}
            ${AIR_CODE_DIR}/compiler/graphcompiler/engines
            ${TOP_DIR}/air/test/engines/nneng
            ${FE_ROOT_PATH}/executor
            ${FE_ROOT_PATH}/inc
            ${FE_ROOT_PATH}/optimizer
            ${FE_ROOT_PATH}/utils
            ${FE_ROOT_PATH}/opskernel
            ${METADEF_DIR}/inc
            ${METADEF_DIR}/inc/graph/
            ${METADEF_DIR}/inc/graph/utils
            ${METADEF_DIR}/inc/common
            ${METADEF_DIR}/inc/common/opskernel
            ${METADEF_DIR}/inc/common/optimizer
            ${METADEF_DIR}/inc/common/util
            ${METADEF_DIR}/inc/external
            ${METADEF_DIR}/inc/external/graph
            ${METADEF_DIR}/inc/register
            ${METADEF_DIR}/third_party
            ${METADEF_DIR}/graph
            ${AIR_ROOT_INC_DIR}/external
            ${AIR_ROOT_INC_DIR}/framework
            ${AIR_ROOT_INC_DIR}/ops
            ${AIR_ROOT_INC_DIR}
            ${GTEST_INCLUDE}
            ${TOP_DIR}/ops/built-in/op_proto/inc
            ${TOP_DIR}/cann/ops/built-in/op_proto/inc
            ${TOP_DIR}/asl/ops/ops/built-in/op_proto/inc
            ${TOP_DIR}/asl/ops/cann/ops/built-in/op_proto/inc
            ${AIR_CODE_DIR}/test/engines/nneng/graph_constructor
            ${CMAKE_BINARY_DIR}/proto/fe_ut)

    target_compile_options(fe_ut PRIVATE
            $<$<COMPILE_LANGUAGE:CXX>:-std=c++11>
            -D__OPTIMIZER_KT_TEST__
            -DDAVINCI_CLOUD
            -Dgoogle=ascend_private)

    target_compile_definitions(fe_ut PRIVATE
            $<$<STREQUAL:${BUILD_OPEN_PROJECT},True>:ONLY_COMPILE_OPEN_SRC>)

    target_link_libraries(fe_ut PRIVATE
            $<BUILD_INTERFACE:intf_pub>
            -Wl,--no-as-needed
            -lrt -ldl -lpthread -lgcov
            graph
            register
            runtime_stub_fe
            ascend_protobuf
            c_sec
            platform
            compress
            error_manager
            json
            gtest
            gtest_main
            c_sec_static
            easy_graph
            ge_graph_dsl)
else()
    target_include_directories(fe_ut PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}
            ${AIR_CODE_DIR}/compiler/graphcompiler/engines
            ${TOP_DIR}/air/test/engines/nneng
            ${FE_ROOT_PATH}/executor
            ${FE_ROOT_PATH}/inc
            ${FE_ROOT_PATH}/optimizer
            ${FE_ROOT_PATH}/utils
            ${FE_ROOT_PATH}/opskernel
            ${METADEF_DIR}/inc
            ${METADEF_DIR}/graph/
            ${METADEF_DIR}/inc/graph/
            ${METADEF_DIR}/inc/graph/utils
            ${METADEF_DIR}/inc/common
            ${METADEF_DIR}/inc/common/opskernel
            ${METADEF_DIR}/inc/common/optimizer
            ${METADEF_DIR}/inc/common/util
            ${METADEF_DIR}/inc/common/util/compress
            ${METADEF_DIR}/inc/external
            ${METADEF_DIR}/inc/external/graph
            ${METADEF_DIR}/inc/register
            ${METADEF_DIR}/graph
            ${TOP_DIR}/inc/external
            ${TOP_DIR}/inc/framework
            ${TOP_DIR}/inc/ops
            ${TOP_DIR}/inc
            ${TOP_DIR}/graphengine/inc/framework
            ${TOP_DIR}/graphengine/inc/external
            ${TOP_DIR}/graphengine/inc
            ${TOP_DIR}/ops/built-in/op_proto/inc
            ${TOP_DIR}/cann/ops/built-in/op_proto/inc
            ${TOP_DIR}/asl/ops/ops/built-in/op_proto/inc
            ${TOP_DIR}/asl/ops/cann/ops/built-in/op_proto/inc
            ${TOP_DIR}/air/test/engines/nneng/graph_constructor
            ${TOP_DIR}/abl/platform/compress/inc
            ${CMAKE_BINARY_DIR}/proto/fe_ut)

    target_compile_options(fe_ut PRIVATE
            $<$<COMPILE_LANGUAGE:CXX>:-std=c++11>
            -D__OPTIMIZER_KT_TEST__
            -DDAVINCI_CLOUD
            -Dgoogle=ascend_private)

    target_link_libraries(fe_ut PRIVATE
            $<BUILD_INTERFACE:intf_llt_pub>
            $<BUILD_INTERFACE:mmpa_headers>
            $<BUILD_INTERFACE:msprof_headers>
            $<BUILD_INTERFACE:slog_headers>
            $<BUILD_INTERFACE:runtime_headers>
            $<BUILD_INTERFACE:tensor_engine_headers>
            $<BUILD_INTERFACE:graph_tuner_headers>
            $<BUILD_INTERFACE:cce_headers>
            -Wl,--no-as-needed
            -lrt -ldl -lpthread -lgcov
            graph
            register
            runtime_stub_fe
            ascend_protobuf
            c_sec
            compress
            error_manager
            json
            c_sec_static
            easy_graph
            ge_graph_dsl)

    run_llt_test(
            TARGET fe_ut
            TASK_NUM 1)
endif()
