import unittest

from profiling_bean.ge.ge_model_time_bean import GeModelTimeBean

NAMESPACE = 'profiling_bean.struct_info.ge.ge_fusion_op_info_bean'


class TestGeModelTimeBean(unittest.TestCase):

    def test_construct(self):
        bean = GeModelTimeBean()
        binary_data = b'ZZ\x16\x00\x01\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00ge_default_20211216143654_1\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe9\x01\x00\x00\x86yl\xf5\xa2Z\x00\x00\xda\x8dm\xf5\xa2Z\x00\x00\x92\xc1m\xf5\xa2Z\x00\x00\xf4\xb9\x80\x05\xa3Z\x00\x00j\xee\x80\x05\xa3Z\x00\x00b+\x83\x05\xa3Z\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
        bean.fusion_decode(binary_data)
        self.assertEqual(bean.infer_end_time, 99656218491380)
        self.assertEqual(bean.infer_start_time, 99655948812690)
        self.assertEqual(bean.input_data_end_time, 99655948799450)
        self.assertEqual(bean.input_data_start_time, 99655948728710)
        self.assertEqual(bean.model_id, 1)
        self.assertEqual(bean.model_name,
                         b'ge_default_20211216143654_1\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
        self.assertEqual(bean.output_data_end_time, 99656218651490)
        self.assertEqual(bean.output_data_start_time, 99656218504810)
        self.assertEqual(bean.request_id, 0)
        self.assertEqual(bean.thread_id, 489)
        self.assertEqual(bean.is_hash_type(), False)


if __name__ == '__main__':
    unittest.main()
